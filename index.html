<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Nuestra Historia ‚ù§Ô∏è</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&display=swap');

html,body{
    margin:0;
    padding:0;
    height:100dvh;
    width:100%;
    overflow:hidden;
    font-family:'Roboto', sans-serif;
    background:#ffcad4;
    color:white;
}

/* Fondo */
#background{
    position:fixed;
    inset:0;
    background: linear-gradient(135deg, #ff9aa2, #ffb7b2);
    z-index:0;
    transition: transform 1s ease;
}

/* Estrellas */
#stars{
    position:fixed;
    width:100%;
    height:100%;
    z-index:1;
}
.star{
    position:absolute;
    width:2px;
    height:2px;
    background:white;
    opacity:0.8;
    animation:twinkle 2s infinite alternate;
}
@keyframes twinkle{
    from{opacity:0.3;}
    to{opacity:1;}
}

/* Corazones */
#floatingHearts{
    position:fixed;
    width:100%;
    height:100%;
    pointer-events:none;
    overflow:hidden;
    z-index:1;
}
.floating-heart{
    position:absolute;
    bottom:-50px;
    color:rgba(255,255,255,0.7);
    animation:floatUp linear infinite;
}
@keyframes floatUp{
    0%{transform:translateY(0) scale(1);opacity:0.8;}
    100%{transform:translateY(-110vh) scale(1.5);opacity:0;}
}

/* Escenas */
.scene{
    position:absolute;
    inset:0;
    height:100dvh;
    width:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    text-align:center;
    opacity:0;
    pointer-events:none;
    transition:opacity 0.8s ease;
    z-index:2;
    padding:20px;
    box-sizing:border-box;
}
.scene.active{
    opacity:1;
    pointer-events:auto;
}

/* Bot√≥n */
button{
    padding:14px 28px;
    font-size:16px;
    border:none;
    border-radius:40px;
    background:linear-gradient(45deg,#ff4d6d,#ff9aa2);
    color:white;
    cursor:pointer;
    margin-top:20px;
}

/* Coraz√≥n */
.heart-name-container{
    width:85vw;
    max-width:380px;
    height:320px;
    margin:20px 0;
    position:relative;
    animation:latidoCorazon 1.4s infinite ease-in-out;
}
.heart-name{
    width:100%;
    height:100%;
    position:absolute;
    clip-path: path("M190 300 L40 150 A80 80 0 0 1 190 70 A80 80 0 0 1 340 150 Z");
    display:flex;
    flex-wrap:wrap;
    align-content:flex-start;
    justify-content:center;
}
.heart-name span{
    font-size:16px;
    color:#ff1744;
    margin:3px 5px;
    opacity:0;
    transform:scale(0.3);
    transition:all .3s ease;
}
.heart-name span.show{
    opacity:1;
    transform:scale(1);
}
@keyframes latidoCorazon{
    0%{ transform:scale(1); }
    50%{ transform:scale(1.06); }
    100%{ transform:scale(1); }
}

/* Carta PERFECTA m√≥vil */
.card{
    background: linear-gradient(145deg, #fff5f7, #ffd1dc);
    width:100%;
    max-width:480px;
    height:85dvh;
    border-radius:25px;
    padding:22px;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    box-shadow:0 0 25px rgba(255,77,109,0.6);
    color:#b7004f;
}

#textoCarta{
    font-family:'Playfair Display', serif;
    font-size:15px;
    line-height:1.6;
    overflow-y:auto;
    flex:1;
    padding-right:5px;
}

.latido{
    display:inline-block;
    animation:latir 1s infinite;
}
@keyframes latir{
    0%{transform:scale(1);}
    50%{transform:scale(1.2);}
    100%{transform:scale(1);}
}

#contador{
    font-size:18px;
    font-weight:bold;
    margin-top:20px;
}
</style>
</head>
<body>

<div id="background"></div>
<div id="stars"></div>
<div id="floatingHearts"></div>

<audio id="musica" autoplay loop>
<source src="the-reason.mp3" type="audio/mpeg">
</audio>

<div class="scene active" id="inicio">
    <h1>Feliz San Valent√≠n ‚ù§Ô∏è</h1>

    <div class="heart-name-container">
        <div class="heart-name" id="heartAli"></div>
    </div>

    <button onclick="abrirCarta()">Abrir mi carta üíå</button>
</div>

<div class="scene" id="carta">
    <div class="card">
        <div id="textoCarta"></div>
        <button id="btnHistoria" style="display:none"
            onclick="irContador()">Ver nuestra historia ‚è≥</button>
    </div>
</div>

<div class="scene" id="escenaContador">
    <h2>Nuestra historia empez√≥ hace‚Ä¶</h2>
    <div id="contador"></div>
</div>

<script>

/* Pantalla completa autom√°tica */
function activarPantallaCompleta(){
    const doc=document.documentElement;
    if(doc.requestFullscreen){
        doc.requestFullscreen().catch(()=>{});
    }
}
window.addEventListener("load", activarPantallaCompleta);

/* M√∫sica */
window.addEventListener("load", ()=>{
    document.getElementById("musica").play().catch(()=>{});
});

/* Estrellas */
for(let i=0;i<100;i++){
    let star=document.createElement("div");
    star.className="star";
    star.style.top=Math.random()*100+"%";
    star.style.left=Math.random()*100+"%";
    document.getElementById("stars").appendChild(star);
}

/* Corazones */
setInterval(()=>{
    const heart=document.createElement("div");
    heart.className="floating-heart";
    heart.innerHTML="‚ù§";
    heart.style.left=Math.random()*100+"%";
    heart.style.fontSize=(15+Math.random()*20)+"px";
    heart.style.animationDuration=(4+Math.random()*4)+"s";
    document.getElementById("floatingHearts").appendChild(heart);
    setTimeout(()=>heart.remove(),8000);
},500);

/* Coraz√≥n Ali */
function llenarCorazon(){
    const heart=document.getElementById("heartAli");
    for(let i=0;i<380;i++){
        const span=document.createElement("span");
        span.textContent="Ali";
        heart.appendChild(span);
        setTimeout(()=>span.classList.add("show"), i*12);
    }
}
llenarCorazon();

/* Escenas */
function cambiarEscena(id){
    document.querySelectorAll(".scene").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

function abrirCarta(){
    cambiarEscena("carta");
    escribirCarta();
}

/* Carta original */
function escribirCarta(){
const texto=`Hola mi amor üíï,

Desde aquel 21 de mayo de 2025, cada d√≠a a tu lado ha sido un regalo
que nunca imagin√©. Tu risa ilumina mis d√≠as m√°s oscuros,
y tu abrazo me hace sentir en casa sin importar d√≥nde estemos.

Cada momento contigo es un tesoro: desde nuestras peque√±as conversaciones
hasta nuestras aventuras locas, todo me recuerda
lo afortunado que soy de tenerte en mi vida.

Gracias por tu paciencia, por tus abrazos inesperados,
por tus sonrisas que curan todo y por cada detalle que demuestra
lo incre√≠ble que eres.

Eres mi paz, mi alegr√≠a, mi compa√±era de aventuras,
y si pudiera elegir mil vidas, en todas te elegir√≠a a ti.

Eres mi raz√≥n ‚ù§Ô∏è`;

let i=0;
const cont=document.getElementById("textoCarta");

const writer=setInterval(()=>{
    cont.innerHTML+=texto.charAt(i)==="\n"?"<br>":texto.charAt(i);
    i++;
    if(i>=texto.length){
        clearInterval(writer);
        cont.innerHTML=cont.innerHTML.replace(
            "Eres mi raz√≥n ‚ù§Ô∏è",
            "<span class='latido'>Eres mi raz√≥n ‚ù§Ô∏è</span>"
        );
        document.getElementById("btnHistoria").style.display="inline-block";
    }
},35);
}

/* Contador */
function irContador(){
    cambiarEscena("escenaContador");
}

function actualizarContador(){
    const inicio=new Date("2025-05-21T00:00:00");
    const ahora=new Date();
    const diff=ahora-inicio;

    const dias=Math.floor(diff/(1000*60*60*24));
    const horas=Math.floor((diff/(1000*60*60))%24);
    const minutos=Math.floor((diff/(1000*60))%60);
    const segundos=Math.floor((diff/1000)%60);

    document.getElementById("contador").innerText=
        `${dias} d√≠as, ${horas} horas, ${minutos} minutos y ${segundos} segundos ‚ù§Ô∏è`;
}
setInterval(actualizarContador,1000);
actualizarContador();

</script>
</body>
</html>

