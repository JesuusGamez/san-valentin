<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
<meta name="theme-color" content="#ff4d6d">
<title>Nuestra Historia ‚ù§Ô∏è</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&display=swap');

html,body{
    margin:0;
    padding:0;
    height:100dvh;
    width:100%;
    overflow:hidden;
    font-family:'Roboto', sans-serif;
    background:#ffcad4;
    color:white;
}

/* ===== FONDO CINEM√ÅTICO ===== */
#background{
    position:fixed;
    inset:0;
    background: linear-gradient(135deg, #ff9aa2, #ffb7b2);
    z-index:0;
    transition: all 2s ease;
}
#background.cinema{
    filter:brightness(0.5) blur(6px);
    transform:scale(1.1);
}

/* ===== CORAZONES FLOTANDO ===== */
#floatingHearts{
    position:fixed;
    inset:0;
    pointer-events:none;
    overflow:hidden;
    z-index:1;
}
.floating-heart{
    position:absolute;
    bottom:-50px;
    color:rgba(255,255,255,0.7);
    animation:floatUp linear infinite;
}
@keyframes floatUp{
    0%{transform:translateY(0) scale(1);opacity:0.8;}
    100%{transform:translateY(-110vh) scale(1.5);opacity:0;}
}

/* ===== ESCENAS ===== */
.scene{
    position:absolute;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    text-align:center;
    opacity:0;
    pointer-events:none;
    transition:opacity 1s ease;
    z-index:2;
    padding:20px;
}
.scene.active{
    opacity:1;
    pointer-events:auto;
}

/* ===== BOT√ìN ===== */
button{
    padding:14px 30px;
    font-size:16px;
    border:none;
    border-radius:50px;
    background:linear-gradient(45deg,#ff4d6d,#ff9aa2);
    color:white;
    cursor:pointer;
    margin-top:20px;
    box-shadow:0 8px 20px rgba(0,0,0,0.2);
}

/* ===== CORAZ√ìN "ALI" ===== */
.heart-name-container{
    width:80vw;
    max-width:350px;
    height:300px;
    margin:20px 0;
    position:relative;
    animation:latido 1.5s infinite ease-in-out;
}
@keyframes latido{
    0%{ transform:scale(1); }
    50%{ transform:scale(1.07); }
    100%{ transform:scale(1); }
}

.heart-name{
    width:100%;
    height:100%;
    position:absolute;
    clip-path: path("M180 280 L40 140 A75 75 0 0 1 180 60 A75 75 0 0 1 320 140 Z");
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
}

.heart-name span{
    font-size:14px;
    color:#ff1744;
    margin:2px 4px;
    opacity:0;
    transform:scale(0.5);
    transition:all .3s ease;
}
.heart-name span.show{
    opacity:1;
    transform:scale(1);
}

/* ===== CARTA CINEM√ÅTICA ===== */
.card{
    position:relative;
    background: #ffffff; /* fondo blanco s√≥lido */
    width:100%;
    max-width:480px;
    height:85dvh;
    border-radius:30px;
    padding:25px;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    box-shadow:0 30px 60px rgba(0,0,0,0.35);
    color:#ff1744; /* texto rojo fuerte */

    opacity:0;
    transform:translateY(80px) scale(0.9);
    transition:all 1.5s cubic-bezier(.23,1.01,.32,1);
}

.card::before{
    content:"";
    position:absolute;
    inset:-20px;
    border-radius:40px;
    background:radial-gradient(circle, rgba(255,77,109,0.2), transparent 70%);
    z-index:-1;
    opacity:0;
    transition:opacity 2s ease;
}

#textoCarta{
    font-family:'Playfair Display', serif;
    font-size:15px;
    line-height:1.7;
    overflow-y:auto;
    flex:1;
    color:#ff1744; /* rojo fuerte */
    text-shadow: 
        -1px -1px 0 #ffffff,  
        1px -1px 0 #ffffff,
        -1px 1px 0 #ffffff,
        1px 1px 0 #ffffff; /* contorno blanco */
}

.card.mostrar{
    opacity:1;
    transform:translateY(0) scale(1);
}
.card.mostrar::before{
    opacity:1;
}


.latidoTexto{
    display:inline-block;
    animation:latirTexto 1s infinite;
}
@keyframes latirTexto{
    0%{transform:scale(1);}
    50%{transform:scale(1.25);}
    100%{transform:scale(1);}
}

/* ===== FUEGOS ARTIFICIALES CORAZONES ===== */
.firework-heart{
    position:absolute;
    font-size:18px;
    opacity:1;
    animation:firework 1.2s ease-out forwards;
}
@keyframes firework{
    0%{transform:translate(0,0) scale(0.5); opacity:1;}
    100%{transform:translate(var(--x), var(--y)) scale(1.5); opacity:0;}
}

#contador{
    font-size:18px;
    font-weight:bold;
    margin-top:20px;
}
</style>
</head>
<body>

<div id="background"></div>
<div id="floatingHearts"></div>

<audio id="musica" loop>
<source src="the-reason.mp3" type="audio/mpeg">
</audio>

<div class="scene active" id="inicio">
    <h1>Feliz San Valent√≠n ‚ù§Ô∏è</h1>

    <div class="heart-name-container">
        <div class="heart-name" id="heartAli"></div>
    </div>

    <button onclick="abrirCarta()">Abrir mi carta üíå</button>
</div>

<div class="scene" id="carta">
    <div class="card" id="card">
        <div id="textoCarta"></div>
        <button id="btnHistoria" style="display:none"
            onclick="irContador()">Ver nuestra historia ‚è≥</button>
    </div>
</div>

<div class="scene" id="escenaContador">
    <h2>Nuestra historia empez√≥ hace‚Ä¶</h2>
    <div id="contador"></div>
</div>

<script>

/* Ocultar barra m√≥vil */
window.addEventListener("load",()=>{
    setTimeout(()=>window.scrollTo(0,1),100);
});

/* Corazones flotando */
setInterval(()=>{
    const heart=document.createElement("div");
    heart.className="floating-heart";
    heart.innerHTML="‚ù§";
    heart.style.left=Math.random()*100+"%";
    heart.style.fontSize=(14+Math.random()*18)+"px";
    heart.style.animationDuration=(4+Math.random()*4)+"s";
    document.getElementById("floatingHearts").appendChild(heart);
    setTimeout(()=>heart.remove(),8000);
},500);

/* Coraz√≥n ALI */
function llenarCorazon(){
    const heart=document.getElementById("heartAli");
    for(let i=0;i<350;i++){
        const span=document.createElement("span");
        span.textContent="Ali";
        heart.appendChild(span);
        setTimeout(()=>span.classList.add("show"), i*10);
    }
}
llenarCorazon();

/* Escenas */
function cambiarEscena(id){
    document.querySelectorAll(".scene").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

/* Abrir carta */
function abrirCarta(){
    cambiarEscena("carta");

    const musica=document.getElementById("musica");
    musica.currentTime = 13; // empezar en coro
    musica.play().catch(()=>{});

    document.getElementById("background").classList.add("cinema");

    setTimeout(()=>{
        document.getElementById("card").classList.add("mostrar");
        escribirCarta();
    },400);
}

/* Carta original escribi√©ndose poco a poco + fuego de corazones al final */
function escribirCarta(){
const texto=`Hola mi amor üíï,

Desde aquel 21 de mayo de 2025, cada d√≠a a tu lado ha sido un regalo
que nunca imagin√©. Tu risa ilumina mis d√≠as m√°s oscuros,
y tu abrazo me hace sentir en casa sin importar d√≥nde estemos.

Cada momento contigo es un tesoro: desde nuestras peque√±as conversaciones
hasta nuestras peque√±as aventuras, todo me recuerda
lo afortunado que soy de tenerte en mi vida.

Gracias por tu paciencia, por tus abrazos inesperados,
por tus sonrisas que curan todo y por cada detalle que demuestra
lo incre√≠ble que eres. 

Eres mi paz, mi alegr√≠a, mi compa√±era de aventuras,
y si pudiera elegir mil vidas, en todas te elegir√≠a a ti.

Eres mi raz√≥n ‚ù§Ô∏è`;

let i=0;
const cont=document.getElementById("textoCarta");

const writer=setInterval(()=>{
    cont.innerHTML+=texto.charAt(i)==="\n"?"<br>":texto.charAt(i);
    i++;
    if(i>=texto.length){
        clearInterval(writer);
        cont.innerHTML=cont.innerHTML.replace(
            "Eres mi raz√≥n ‚ù§Ô∏è",
            "<span class='latidoTexto'>Eres mi raz√≥n ‚ù§Ô∏è</span>"
        );
        document.getElementById("btnHistoria").style.display="inline-block";

        // FUEGOS ARTIFICIALES CORAZONES
        for(let j=0;j<20;j++){
            const f=document.createElement("div");
            f.className="firework-heart";
            f.innerHTML="‚ù§";
            const x=(Math.random()-0.5)*200 + "px";
            const y=(Math.random()-0.5)*200 + "px";
            f.style.setProperty('--x',x);
            f.style.setProperty('--y',y);
            f.style.left="50%";
            f.style.top="50%";
            document.getElementById("card").appendChild(f);
            setTimeout(()=>f.remove(),1500);
        }
    }
},35);
}

/* Contador */
function irContador(){
    cambiarEscena("escenaContador");
}

function actualizarContador(){
    const inicio=new Date("2025-05-21T00:00:00");
    const ahora=new Date();
    const diff=ahora-inicio;

    const dias=Math.floor(diff/(1000*60*60*24));
    const horas=Math.floor((diff/(1000*60*60))%24);
    const minutos=Math.floor((diff/(1000*60))%60);
    const segundos=Math.floor((diff/1000)%60);

    document.getElementById("contador").innerText=
        `${dias} d√≠as, ${horas} horas, ${minutos} minutos y ${segundos} segundos ‚ù§Ô∏è`;
}
setInterval(actualizarContador,1000);
actualizarContador();

</script>
</body>
</html>

