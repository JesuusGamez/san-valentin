<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
<meta name="theme-color" content="#ff4d6d">
<title>Nuestra Historia ‚ù§Ô∏è</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&display=swap');

html,body{
    margin:0;
    padding:0;
    height:100dvh;
    width:100%;
    overflow:hidden;
    font-family:'Roboto', sans-serif;
    background:#ffcad4;
    color:white;
}

/* Fondo animado */
#background{
    position:fixed;
    inset:0;
    background: linear-gradient(135deg, #ff9aa2, #ffb7b2);
    z-index:0;
    transition: transform 3s ease;
}

/* Escenas */
.scene{
    position:absolute;
    inset:0;
    height:100dvh;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    text-align:center;
    opacity:0;
    pointer-events:none;
    transition:opacity 1s ease;
    z-index:2;
    padding:20px;
    box-sizing:border-box;
}
.scene.active{
    opacity:1;
    pointer-events:auto;
}

/* Bot√≥n elegante */
button{
    padding:14px 30px;
    font-size:16px;
    border:none;
    border-radius:50px;
    background:linear-gradient(45deg,#ff4d6d,#ff9aa2);
    color:white;
    cursor:pointer;
    margin-top:20px;
    box-shadow:0 8px 20px rgba(0,0,0,0.2);
    transition:all .3s ease;
}
button:active{
    transform:scale(0.96);
}

/* Coraz√≥n */
.heart-name-container{
    width:80vw;
    max-width:350px;
    height:300px;
    margin:20px 0;
    position:relative;
    animation:latidoCorazon 1.5s infinite ease-in-out;
}
.heart-name{
    width:100%;
    height:100%;
    position:absolute;
    clip-path: path("M180 280 L40 140 A75 75 0 0 1 180 60 A75 75 0 0 1 320 140 Z");
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
}
.heart-name span{
    font-size:14px;
    color:#ff1744;
    margin:2px 4px;
    opacity:0;
    transform:scale(0.5);
    transition:all .3s ease;
}
.heart-name span.show{
    opacity:1;
    transform:scale(1);
}
@keyframes latidoCorazon{
    0%{ transform:scale(1); }
    50%{ transform:scale(1.07); }
    100%{ transform:scale(1); }
}

/* CARTA ELEGANTE */
.card{
    background: linear-gradient(145deg, #fff5f7, #ffd1dc);
    width:100%;
    max-width:480px;
    height:85dvh;
    border-radius:30px;
    padding:25px;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    box-shadow:0 20px 40px rgba(0,0,0,0.25);
    color:#b7004f;

    opacity:0;
    transform:translateY(60px) scale(0.95);
    transition:all 1s cubic-bezier(.23,1.01,.32,1);
}
.card.mostrar{
    opacity:1;
    transform:translateY(0) scale(1);
}

#textoCarta{
    font-family:'Playfair Display', serif;
    font-size:15px;
    line-height:1.7;
    overflow-y:auto;
    flex:1;
    padding-right:5px;
    opacity:0;
    transition:opacity 2s ease;
}
#textoCarta.visible{
    opacity:1;
}

.latido{
    display:inline-block;
    animation:latir 1s infinite;
}
@keyframes latir{
    0%{transform:scale(1);}
    50%{transform:scale(1.2);}
    100%{transform:scale(1);}
}

#contador{
    font-size:18px;
    font-weight:bold;
    margin-top:20px;
}
</style>
</head>
<body>

<div id="background"></div>

<audio id="musica" loop>
<source src="the-reason.mp3" type="audio/mpeg">
</audio>

<div class="scene active" id="inicio">
    <h1>Feliz San Valent√≠n ‚ù§Ô∏è</h1>

    <div class="heart-name-container">
        <div class="heart-name" id="heartAli"></div>
    </div>

    <button onclick="abrirCarta()">Abrir mi carta üíå</button>
</div>

<div class="scene" id="carta">
    <div class="card" id="card">
        <div id="textoCarta"></div>
        <button id="btnHistoria" style="display:none"
            onclick="irContador()">Ver nuestra historia ‚è≥</button>
    </div>
</div>

<div class="scene" id="escenaContador">
    <h2>Nuestra historia empez√≥ hace‚Ä¶</h2>
    <div id="contador"></div>
</div>

<script>

/* Ocultar barra navegador (truco m√≥vil) */
window.addEventListener("load",()=>{
    setTimeout(()=>{ window.scrollTo(0,1); },100);
});

/* Coraz√≥n */
function llenarCorazon(){
    const heart=document.getElementById("heartAli");
    for(let i=0;i<350;i++){
        const span=document.createElement("span");
        span.textContent="Ali";
        heart.appendChild(span);
        setTimeout(()=>span.classList.add("show"), i*10);
    }
}
llenarCorazon();

/* Escenas */
function cambiarEscena(id){
    document.querySelectorAll(".scene").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

/* Abrir carta elegante + m√∫sica */
function abrirCarta(){

    // Cambiar escena
    cambiarEscena("carta");

    // Activar m√∫sica (ya hay interacci√≥n del usuario)
    const musica=document.getElementById("musica");
    musica.play().catch(()=>{});

    // Animar carta
    setTimeout(()=>{
        document.getElementById("card").classList.add("mostrar");
        escribirCarta();
    },300);
}

/* Carta con fade elegante */
function escribirCarta(){
const texto=`Hola mi amor üíï,

Desde aquel 21 de mayo de 2025, cada d√≠a a tu lado ha sido un regalo
que nunca imagin√©. Tu risa ilumina mis d√≠as m√°s oscuros,
y tu abrazo me hace sentir en casa sin importar d√≥nde estemos.

Cada momento contigo es un tesoro: desde nuestras peque√±as conversaciones
hasta nuestras aventuras locas, todo me recuerda
lo afortunado que soy de tenerte en mi vida.

Gracias por tu paciencia, por tus abrazos inesperados,
por tus sonrisas que curan todo y por cada detalle que demuestra
lo incre√≠ble que eres.

Eres mi paz, mi alegr√≠a, mi compa√±era de aventuras,
y si pudiera elegir mil vidas, en todas te elegir√≠a a ti.

Eres mi raz√≥n ‚ù§Ô∏è`;

const cont=document.getElementById("textoCarta");
cont.innerHTML=texto.replace(/\n/g,"<br>");
cont.classList.add("visible");

setTimeout(()=>{
    cont.innerHTML=cont.innerHTML.replace(
        "Eres mi raz√≥n ‚ù§Ô∏è",
        "<span class='latido'>Eres mi raz√≥n ‚ù§Ô∏è</span>"
    );
    document.getElementById("btnHistoria").style.display="inline-block";
},2000);
}

/* Contador */
function irContador(){
    cambiarEscena("escenaContador");
}

function actualizarContador(){
    const inicio=new Date("2025-05-21T00:00:00");
    const ahora=new Date();
    const diff=ahora-inicio;

    const dias=Math.floor(diff/(1000*60*60*24));
    const horas=Math.floor((diff/(1000*60*60))%24);
    const minutos=Math.floor((diff/(1000*60))%60);
    const segundos=Math.floor((diff/1000)%60);

    document.getElementById("contador").innerText=
        `${dias} d√≠as, ${horas} horas, ${minutos} minutos y ${segundos} segundos ‚ù§Ô∏è`;
}
setInterval(actualizarContador,1000);
actualizarContador();

</script>
</body>
</html>

